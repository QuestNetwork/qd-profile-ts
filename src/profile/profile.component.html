<!-- <div class="toggleStreams mat-elevatation-z14"  (click)="showStream()">
  <nb-icon icon="activity-outline"></nb-icon> Network
</div> -->


    <ng-template #qrPop let-data let-ref="qrRef">
          <nb-card>
            <nb-card-header>Verify Peer</nb-card-header>
            <nb-card-body style="color:goldenrod;">

              <div class='qrScanWrapper'>
              <zxing-scanner [torch]="torchEnabled" [(device)]="currentDevice" (scanSuccess)="qrSuccessHandler($event)"
                [formats]="formatsEnabled" [tryHarder]="tryHarder" (permissionResponse)="onHasPermission($event)"
                (camerasFound)="onCamerasFound($event)" (torchCompatible)="onTorchCompatible($event)"></zxing-scanner>
                </div>

            </nb-card-body>
            <nb-card-footer>
              <!-- <button mat-stroked-button color="primary" (click)="createNewChannel(newChannelName);" style="    margin-right: 20px;
        border: 1px solid #ffffff24;">Use</button> -->
              <button mat-stroked-button color="primary" (click)="closeQR()" style="    border: 1px solid #ffffff24;">Cancel</button>
            </nb-card-footer>
          </nb-card>
        </ng-template>


        <ng-template #qrCode let-data let-ref="qrCodeRef">
              <nb-card>
                <nb-card-header>Verify Peer</nb-card-header>
                <nb-card-body style="margin:10px;color:goldenrod;">

                  <div style="">






                    <div class="qrCodeWrapper">
                      <img [src]="qrCodeURLSafe" alt="" class="img-thumbnail" class="qrCodeShowGenerate">
                    </div>




                      </div>
                </nb-card-body>
                <nb-card-footer>
                  <button mat-stroked-button color="primary" (click)="closePopup()" style="    border: 1px solid #ffffff24;">Close</button>
                </nb-card-footer>
              </nb-card>
            </ng-template>




<div class="poster" *ngIf="!searchResultsActive">

  <div class="profilePrivacy private mat-elevatation-z6" *ngIf="private" (click)="togglePrivacy()" ><nb-icon icon="lock-outline"></nb-icon> Private</div>
  <div class="profilePrivacy mat-elevatation-z14" *ngIf="!private"  (click)="togglePrivacy()"><nb-icon icon="globe-outline"></nb-icon> Public</div>


</div>
<div class="pp"  *ngIf="!searchResultsActive">
<img class="mat-elevation-z14" src="./assets/defaultAvatar.png">
</div>


<div class="details mat-elevation-z6" *ngIf="!editDetails && !searchResultsActive">
  <div class="pubKeyDisplay {{isMyProfile}}" *ngIf="!searchResultsActive" (click)="showVerificationQR()">{{ pubKey }}</div>



  <button mat-stroked-button color="primary" (click)="edit()" class="defaultSettingsButton thickOutlineButton editButton" *ngIf="isMyProfile">Edit</button>


  <button mat-stroked-button color="primary" (click)="verify()" class="defaultSettingsButton thickOutlineButton editButton starButton verifyButton" *ngIf="!isMyProfile && !isVerified">
  <nb-icon icon="checkmark-circle-2-outline"></nb-icon>
  </button>


  <button mat-stroked-button color="primary" class="defaultSettingsButton thickOutlineButton editButton starButton active verifyButton" *ngIf="!isMyProfile && isVerified">
  <nb-icon icon="checkmark-circle-2-outline"></nb-icon>
  </button>


  <button mat-stroked-button color="primary" (click)="setConnection(true)" class="defaultSettingsButton thickOutlineButton editButton starButton" *ngIf="!isMyProfile && !isConnection && !isRequestedConnection">
  <nb-icon icon="star-outline"></nb-icon>
  </button>

  <button mat-stroked-button color="primary" (click)="openMessages(pubKey)" class="defaultSettingsButton thickOutlineButton editButton starButton active" *ngIf="!isMyProfile && isConnection">
  <nb-icon icon="message-circle-outline"></nb-icon>
  </button>

  <button mat-stroked-button color="primary" (click)="setConnection(false)" class="defaultSettingsButton thickOutlineButton editButton starButton pending" *ngIf="!isMyProfile && isRequestedConnection">
  <nb-icon icon="star-outline"></nb-icon>
  </button>


<div class="name">
  <div class="alias">
    {{ alias }}
  </div>
  <div class="fullname">
    {{ fullName }}
  </div>
</div>



<div class="about">
{{ about }}
</div>



<div class="pubKeyDisplay Icon" *ngIf="!searchResultsActive && isMyProfile" (click)="showVerificationQR()">
  <svg class="pubKeyIcon" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="black" width="18px" height="18px"><g><rect fill="none" height="24" width="24"/></g><path d="M15,21h-2v-2h2V21z M13,14h-2v5h2V14z M21,12h-2v4h2V12z M19,10h-2v2h2V10z M7,12H5v2h2V12z M5,10H3v2h2V10z M12,5h2V3h-2V5 z M4.5,4.5v3h3v-3H4.5z M9,9H3V3h6V9z M4.5,16.5v3h3v-3H4.5z M9,21H3v-6h6V21z M16.5,4.5v3h3v-3H16.5z M21,9h-6V3h6V9z M19,19v-3 l-4,0v2h2v3h4v-2H19z M17,12l-4,0v2h4V12z M13,10H7v2h2v2h2v-2h2V10z M14,9V7h-2V5h-2v4L14,9z M6.75,5.25h-1.5v1.5h1.5V5.25z M6.75,17.25h-1.5v1.5h1.5V17.25z M18.75,5.25h-1.5v1.5h1.5V5.25z"/></svg>
</div>

</div>



<div class="details mat-elevation-z6" *ngIf="editDetails && !searchResultsActive">

  <div class="pubKeyDisplay" *ngIf="!searchResultsActive" (click)="showVerificationQR()">{{ pubKey }}</div>


<div class="name">
  <div class="alias">
    <input matInput placeholder="Alias"  name='newAlias' [(ngModel)]='newAlias'>
  </div>
  <div class="fullname">
    <input matInput placeholder="Full Name" name='newFullName' [(ngModel)]='newFullName'>
  </div>
</div>

<div class="about" style="padding-bottom: 20px;">
  <textarea matInput name='about' [(ngModel)]='newAbout'></textarea>
</div>


  <button mat-stroked-button color="primary" class="defaultSettingsButton thickOutlineButton saveButton" (click)="save()">Save</button>
  <button mat-stroked-button color="primary" class="defaultSettingsButton thickOutlineButton discardButton" (click)="edit(false)" >Discard</button>


</div>



<div class="newPostContainer mat-elevation-z8" *ngIf="isMyProfile">
  <textarea matInput name='newPost' [(ngModel)]='newPost' placeholder="What's going on?"></textarea>

    <ngx-emoji [nbPopover]="emojiPickerRef" emoji="grinning" set="apple" size="24" class="emojiPickerTrigger"></ngx-emoji>

    <ng-template #emojiPickerRef>
      <emoji-mart title="Pick your emojiâ€¦" (emojiClick)="addEmoji($event)" emoji="blush" class="emojiPicker" darkMode="true"></emoji-mart>
    </ng-template>


  <button mat-stroked-button color="primary" class="defaultSettingsButton postButton" (click)="post()">Post</button>

</div>




<social-timeline-post-combined-timeline *ngFor="let combinedTimeline of groupedTimeline" [combinedTimeline]="combinedTimeline" [isMyProfile]="isMyProfile">
</social-timeline-post-combined-timeline>




<!--
<div class="fundUs"  *ngIf="syncStatus && !searchResultsActive && this.groupedTimeline.length > 3">

  <a class="mat-elevation-z18" href="https://github.com/QuestNetwork/qd-social-ts#support-us" target="_blank"><button mat-stroked-button color="secondary" class="defaultSettingsButton noOutlineButton fundButton" >Fund This Module For Upgrades!</button></a>

</div>

<div class="fundUs"  *ngIf="!syncStatus || !searchResultsActive || this.groupedTimeline.length > 3">


</div> -->

<div class="fundUs" (click)="syncMore(this.pubKey)" *ngIf="!searchResultsActive" >

<button mat-stroked-button color="secondary" class="mat-elevation-z18 defaultSettingsButton noOutlineButton fundButton" *ngIf="groupedTimeline.length > 0">
    Sync More
  </button>


  <button mat-stroked-button color="secondary" class="mat-elevation-z18 defaultSettingsButton noOutlineButton fundButton" *ngIf="groupedTimeline.length === 0">
      Sync
    </button>

</div>

<div class="results social-search-results" *ngIf="searchResultsActive">


  <div class="resultCardWrapper" *ngFor="let result of searchResults">

    <div class="resultCard mat-elevation-z6" fxLayout="row" (click)="openProfile(result['key']['pubKey'])">
      <div class="searchResultPp">
        <img class="mat-elevation-z14" class="searchResultPpImg" src="./assets/defaultAvatar.png">
      </div>
      <div class="searchResultColumn">
        <span class="searchResultAlias">{{ result['alias'] }} </span><br>
        <span class="searchResultFullName">{{ result['fullName'] }} </span>
      </div>
      <div class="searchResultConnection topCorner" >

        <nb-icon icon="star-outline" style="opacity: 0.2;" *ngIf="!result['isFavorite'] && !result['isRequestedFavorite']"></nb-icon>
        <nb-icon icon="message-circle-outline" (click)="openMessages(result['key']['pubKey'])"  *ngIf="result['isFavorite']"></nb-icon>
        <nb-icon icon="star-outline" *ngIf="result['isRequestedFavorite']" ></nb-icon>
      </div>
      <div class="searchResultAbout searchResultColumn" style="flex:auto;">
        <div class="searchResultAboutWrapper">
        {{ result['about'] }}
        </div>
      </div>
      <div class="searchResultConnection searchResultColumn" style="  margin-top: 27px;  margin-right: 10px;">

        <nb-icon icon="star-outline" style="opacity: 0.2;" *ngIf="!result['isFavorite'] && !result['isRequestedFavorite']"></nb-icon>
        <nb-icon icon="message-circle-outline" (click)="openMessages(result['key']['pubKey'])"  *ngIf="result['isFavorite']"></nb-icon>
        <nb-icon icon="star-outline" *ngIf="result['isRequestedFavorite']" ></nb-icon>
      </div>
    </div>

  </div>



</div>


<div class="search profileSearch">

  <div class="message-row">
  <div style="    width: 100%;">

    <input [(ngModel)]='searchPhrase'
           fullWidth nbInput

           (focus)="inputFocus = true"
           (blur)="inputFocus = false"
           (mouseenter)="inputHover = true"
           (mouseleave)="inputHover = false"
           type="text"
           placeholder="{{  'Who are you looking for?' }}"
           (keyup.enter)="search()" (keyup)="parseSearchBar()" class="mat-elevation-z16" (click)="searchBarClicked()">
    <button  nbSuffix nbButton ghost class="searchButtonWrapper"

            (click)="search()"
        >
      <nb-icon *ngIf="!buttonTitle; else title"  class="searchButton" icon="search-outline"></nb-icon>
      <ng-template #title>{{ buttonTitle }}</ng-template>
    </button>
    </div>

  </div>


</div>
